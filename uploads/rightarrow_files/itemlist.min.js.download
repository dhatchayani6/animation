var slice$=[].slice;ldc.register("itemlist",["error","icon"],function(e){var n,t,i,r,o,l,s,c,d,u;return n=e.error,e.icon,t={},i={handler:{},on:function(e,n){var t;return((t=this.handler)[e]||(t[e]=[])).push(n)},fire:function(e){var n,t,i,r,o,l=[];for(n=slice$.call(arguments,1),t=0,r=(i=this.handler[e]||[]).length;t<r;++t)o=i[t],l.push(o.apply(this,n));return l}},r=function(){return u.on()},o=function(e){return null==e&&(e={}),debounce(500).then(function(){var n;if(u.off(),"empty"===(n=e.state)||"finish"===n){if(d.more&&d.more.classList.toggle("d-none",!0),"empty"===e.state&&d.nothing)return d.nothing.classList.toggle("d-none",!1);if("finish"===e.state&&d.all)return d.all.classList.toggle("d-none",!1)}})},l=debounce(200,function(e){var o,l,s,c,u,a,f;if(null==e&&(e=""),e=(e||"").trim().toLowerCase().replace(/\s+/g," "),t.keyword!==e&&!n.isOn()){for(r(),t.keyword=e,(o=d.more)&&o.classList.toggle("d-none",!1),(o=d.all)&&o.classList.toggle("d-none",!0),(o=d.nothing)&&o.classList.toggle("d-none",!0),l=[],s=d.endmark;s;)c=s.nextSibling,ld$.remove(s),l.push(s),s=c;for(d.list.innerHTML="",u=0,a=l.length;u<a;++u)f=l[u],d.list.appendChild(f);return i.fire("search",{keyword:e}),scrollto(d.list,500,-160)}}),s=function(e){var n,i;return n=e.keyword,d.search.map(function(e){return e.classList.toggle("has-icon",!!n),ld$.find(e,"input",0).value=n}),e.nofetch?(l.clear(),t.keyword=null):(i=l(n),e.now?i.now():void 0)},t.view=c=new ldView({initRender:!1,root:document.body,handler:{itemlist:function(){},"itemlist-finish":function(){},"itemlist-empty":function(){},"itemlist-more":function(e){return e.node.addEventListener("click",function(){return i.fire("next")})},"itemlist-loader":function(){},"itemlist-endmark":function(){},"itemlist-clear":function(e){return e.node.addEventListener("click",function(){return s({keyword:"",nofetch:!0})})},"itemlist-search":function(e){var n,t,i;if(n=e.node,t=ld$.find(n,"input",0))return t.addEventListener("keyup",function(e){if(13===e.keyCode)return s({keyword:t.value})}),t.addEventListener("input",function(e){return s({keyword:t.value,nofetch:!0})}),(i=ld$.find(n,".btn")[0])?i.addEventListener("click",function(){return s({keyword:t.value,now:!0})}):void 0}}}),d={list:c.get("itemlist"),all:c.get("itemlist-finish"),nothing:c.get("itemlist-empty"),more:c.get("itemlist-more"),search:c.getAll("itemlist-search"),loader:c.getAll("itemlist-loader"),endmark:c.get("itemlist-endmark")},u=new ldLoader({root:[d.more].concat(d.loader).filter(function(e){return e})}),d.more&&d.more.classList.toggle("d-none",!1),c.render(),ldc.action("itemlist",{clear:function(){return s({keyword:null,nofetch:!0})},search:function(e){return s({keyword:e})}}),{on:function(e,n){return i.on(e,n)},ldld:u,update:function(e){return o(e)}}});